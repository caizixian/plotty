{% load value_formatting %}
<table>
    <thead>
    <tr>
{% for key in scenario_columns %}
        <th class="scenario-header">{{ key }}</th>
{% endfor %}
{% for key in value_columns %}
        <th class="value-header">{{ key }}</th>
{% endfor %}
    </tr>
    </thead>
    <tbody>
{% for result in results.rows %}
    <tr>
    {% for key in scenario_columns %}
        {% if key in result.scenario %}
            <td>{{ result.scenario|hash:key }}</td>
        {% else %}
            <td>*</td>
        {% endif %}
    {% endfor %}
    {% for key in value_columns %}
        {% if key in result.values %}
            <td>{{ result.values|present:key|safe }}</td>
        {% else %}
            <td>*</td>
        {% endif %}
    {% endfor %}
    </tr>
{% endfor %}
    </tbody>
</table>